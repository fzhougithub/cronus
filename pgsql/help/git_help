git pull origin main --rebase

git diff --staged


BTW, if you by mistake did this command git commit --amend --no-edit before you did your git commit -m "xxxx" you can fix it by git reset --soft HEAD@{1}


finally
after delete branch from Github using GUI
Per local branch

git reset --hard
git clean -fd
git branch
git branch -D DEVOPS-10708-add-space-to-huat-db-kc

Now, done



git clone git@code.ssnc.dev:pharmacy/domanirx-infra.git
git checkout -b  DEVOPS-9839-add-space-to-uatpls-db-kc
git add .
git commit -m 'DEVOPS-9389 add space for apps in ualpls db'
git push origin <branch name>
git commit --amend
git push origin DEVOPS-10708-add-space-to-huat-db-kc -f
git push origin --delete DEVOPS-10835-change-logrotate-pgbackrest-conf-for-all-db

Already submit pull request, but remove one file
git commit --amend --no-edit
git push origin DEVOPS-10830-Change-Two-postgresql.conf-parameters -f

 git add .
 git commit --amend --no-edit
git push origin DEVOPS-10830-Change-Two-postgresql.conf-parameters -f
cd ~
cd work1
grep -ri cron *
cd domanirx-infra
git diff
git restore .
git status
git switch main
git pull origin main --rebase
git branch -d DEVOPS-10830-Change-Two-postgresql.conf-parameters
git branch


In case two commits, need to merge them, squash, and then, force commit

git rebase -i HEAD~2
# change second from pick to squash
# save
Then, in second prompt
remove one of the definition
save

git log -1
git log --oneline -2


git push origin DEVOPS-10830-Change-Two-postgresql.conf-parameters --force


what is this one? 

git commit --amend --no-edit


No, **Git itself won't modify your code** in a way that would make it "dirty" or non-runnable when you push it. However, there are a few scenarios where code might break after `git push` → `git pull`/`git clone`:

---

### **Possible Causes of "Dirty" Code After Git Push/Pull**
1. **Line Ending Conversions (Most Common)**  
   - Git may auto-convert `LF` ↔ `CRLF` based on:
     - Your `core.autocrlf` setting (Windows/Linux/Mac differences)
     - `.gitattributes` file rules
   - **Fix**: Set consistent line endings:
     ```bash
     git config --global core.autocrlf input
     git config --global core.fileMode true

	better to clearly ask git keep permission change
	git update-index --chmod=+x cleancode.py 


     git config --global core.autocrlf true   # Windows
     ```

2. **File Permissions Changed**  
   - Git doesn't track `chmod` by default (unless `core.fileMode=true`)
   - **Fix**: Explicitly set executable permissions:
     ```bash
     git update-index --chmod=+x cleancode.py
     ```

3. **Unicode/Encoding Issues**  
   - Rare, but possible if files get re-encoded during transfer
   - **Fix**: Explicitly declare encoding in your script (which you already do with `encoding="utf-8"`)

4. **Git Hooks (Rare)**  
   - A server-side `pre-receive` or `post-receive` hook might modify files
   - **Check hooks**:
     ```bash
     ls -la .git/hooks/
     ```

---

### **How to Verify Git Isn't Modifying Files**
1. **Check File Hashes**  
   Compare before push vs. after pull:
   ```bash
   # Before push:
   sha256sum cleancode.py
   # After pull on another machine:
   sha256sum cleancode.py
   ```
   Hashes should match exactly.

2. **Inspect Raw Git Objects**  
   See how Git stores your file internally:
   ```bash
   git cat-file -p HEAD:cleancode.py
   ```

3. **Test with Binary Files**  
   Push a binary file (e.g., `.zip`) and verify it doesn't change.

---

### **Best Practices to Prevent Issues**
1. **Add a `.gitattributes` File**  
   Lock down behavior for specific files:
   ```
   *.py text eol=lf
   *.sh text eol=lf
   ```

2. **Use Git's Clean/Smudge Filters** (Advanced)  
   For custom preprocessing if needed.

3. **Verify After Push**  
   ```bash
   git clone <repo> test_clone
   cd test_clone
   python cleancode.py test_input.sql  # Verify it works
   ```

---

### **If Code Still Breaks**
1. **Check `git diff`**  
   Compare working directory vs. last commit:
   ```bash
   git diff --no-index cleancode.py test_clone/cleancode.py
   ```

2. **Audit Your CI/CD Pipeline**  
   Some pipelines (GitHub Actions, Jenkins) may modify files during deployment.

---

### Key Takeaway  
Git is designed to be **byte-preserving**—it won't arbitrarily modify your code. If you're seeing changes, there's either:
- A configuration issue (line endings, encoding)
- An external tool in your workflow modifying files
- A filesystem/permission quirk

Your `cleancode.py` script should remain perfectly runnable after push/pull if the above factors are controlled.
