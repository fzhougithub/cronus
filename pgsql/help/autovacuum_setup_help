
ALTER TABLE mytable SET (
  autovacuum_enabled = true,                   -- on/off for autovacuum
  autovacuum_vacuum_threshold = 50,            -- min # of dead tuples before vacuum
  autovacuum_vacuum_scale_factor = 0.2,        -- fraction of table size for vacuum trigger
  autovacuum_analyze_threshold = 50,           -- min # of tuple changes before analyze
  autovacuum_analyze_scale_factor = 0.1,       -- fraction of table size for analyze trigger
  autovacuum_vacuum_cost_delay = 20,           -- ms delay between costed operations
  autovacuum_vacuum_cost_limit = 200,          -- cost limit for autovacuum
  autovacuum_freeze_min_age = 50000000,        -- minimum XID age before freezing
  autovacuum_freeze_max_age = 200000000,       -- maximum XID age before forced vacuum
  autovacuum_freeze_table_age = 150000000,     -- age at which to vacuum whole table
  autovacuum_multixact_freeze_min_age = 5000000,  -- minimum multixact age before freezing
  autovacuum_multixact_freeze_max_age = 400000000, -- max multixact age before forced vacuum
  autovacuum_multixact_freeze_table_age = 350000000 -- age at which to vacuum whole table for multixacts
);

SELECT
    n.nspname AS schema_name,
    c.relname AS table_name,
    pg_catalog.array_to_string(c.reloptions, ', ') AS autovacuum_settings
FROM pg_catalog.pg_class c
JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
WHERE c.relkind = 'r'  -- only regular tables
  AND c.reloptions IS NOT NULL
ORDER BY schema_name, table_name;



alter table public.one set(autovacuum_enabled=true,autovacuum_vacuum_threshold=1,autovacuum_vacuum_scale_factor=0.1);

