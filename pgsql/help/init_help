chown -R postgres.postgres /apps/lib/pgsql/17/data
rm -rf /apps/lib/pgsql/17/data/*
/usr/pgsql-17/bin/initdb -D /apps/lib/pgsql/17/data

-- 2. Apply the nuclear-speed settings (these are the 2025 production defaults)
ALTER SYSTEM SET max_logical_replication_workers = 32;
ALTER SYSTEM SET max_sync_workers_per_subscription = 16;     -- this one alone usually gives 10–30× speed
ALTER SYSTEM SET max_parallel_apply_workers_per_transaction = 16;
ALTER SYSTEM SET logical_decoding_work_mem = '4GB';          -- prevents tiny spills
ALTER SYSTEM SET max_worker_processes = 64;                  -- make sure you have enough slots
ALTER SYSTEM SET max_parallel_workers = 32;

SELECT pg_reload_conf();




SELECT subname, srrelid::regclass AS table, srsubstate, srsublsn
FROM pg_subscription_rel
JOIN pg_stat_subscription ON subid = subid
WHERE subname IN ('qc_finance_other_sub', 'qc_encounters_other_sub', 'qc_encounters_global_sub');


SELECT slot_name, active, wal_status, restart_lsn, confirmed_flush_lsn
FROM pg_replication_slots
WHERE slot_name IN ('qc_finance_other_sub', 'qc_encounters_other_sub', 'qc_encounters_global_sub');

FK

SELECT conname, conrelid::regclass AS table, confrelid::regclass AS referenced_table
FROM pg_constraint
WHERE contype = 'f' AND conrelid IN (SELECT oid FROM pg_class WHERE relnamespace = (SELECT oid FROM pg_namespace WHERE nspname = 'finance_other'));





