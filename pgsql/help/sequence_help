SELECT
  n.nspname AS sequence_schema,
  c.relname AS sequence_name,
  pg_get_userbyid(c.relowner) AS sequence_owner,
  t.relname AS associated_table,
  a.attname AS associated_column
FROM
  pg_class c
JOIN
  pg_namespace n ON c.relnamespace = n.oid
LEFT JOIN
  pg_depend d ON c.oid = d.objid AND d.classid = 'pg_class'::regclass
LEFT JOIN
  pg_class t ON d.refobjid = t.oid
LEFT JOIN
  pg_attribute a ON d.refobjid = a.attrelid AND d.refobjsubid = a.attnum
WHERE
  c.relkind = 'S'
ORDER BY
  sequence_schema, sequence_name;


SELECT
  n.nspname AS sequence_schema,
  c.relname AS sequence_name,
  -- Current last value of the sequence
  (pg_get_serial_sequence(quote_ident(t.relname), quote_ident(a.attname)))::regclass::text AS sequence_full_name,
  -- Last value generated by the sequence
  s.last_value AS last_generated_value,
  -- Increment value (how much each nextval increases by)
  s.increment_by AS increment_value,
  -- Calculate the next value that will be returned by nextval()
  s.last_value + s.increment_by AS next_value
FROM
  pg_class c
JOIN
  pg_namespace n ON c.relnamespace = n.oid
JOIN
  pg_sequence s ON c.oid = s.seqrelid  -- Get sequence properties
LEFT JOIN
  pg_depend d ON c.oid = d.objid AND d.classid = 'pg_class'::regclass
LEFT JOIN
  pg_class t ON d.refobjid = t.oid
LEFT JOIN
  pg_attribute a ON d.refobjid = a.attrelid AND d.refobjsubid = a.attnum
WHERE
  c.relkind = 'S'  -- Filter for sequences
  AND c.relname = 'pct_field_pct_field_id_seq'  -- Your sequence name
  AND n.nspname IN ('public', 'pct_global');  -- Your schemas


