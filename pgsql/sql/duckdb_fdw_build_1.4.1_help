git clone https://github.com/alitrack/duckdb_fdw
cd duckdb_fdw
./download_libduckdb.sh

DUCKDB_VERSION=1.4.1
wget -c https://github.com/duckdb/duckdb/releases/download/v${DUCKDB_VERSION}/libduckdb-linux-amd64.zip
unzip -d . libduckdb-linux-amd64.zip

dnf install postgresql14-devel

# The .duckdb_version file is automatically created by the download script
make USE_PGXS=1

mkdir /var/lib/pgsql/work/final
make install USE_PGXS=1 DESTDIR=/var/lib/pgsql/work/final

/usr/bin/mkdir -p '/var/lib/pgsql/work/final/usr/pgsql-14/lib'
/usr/bin/mkdir -p '/var/lib/pgsql/work/final/usr/pgsql-14/share/extension'
/usr/bin/mkdir -p '/var/lib/pgsql/work/final/usr/pgsql-14/share/extension'
/usr/bin/install -c -m 755  duckdb_fdw.so '/var/lib/pgsql/work/final/usr/pgsql-14/lib/duckdb_fdw.so'
/usr/bin/install -c -m 755 libduckdb.so /var/lib/pgsql/work/final/usr/pgsql-14/lib
/usr/bin/install -c -m 644 .//duckdb_fdw.control '/var/lib/pgsql/work/final/usr/pgsql-14/share/extension/'
/usr/bin/install -c -m 644 .//duckdb_fdw--1.0.0.sql .//duckdb_fdw--1.0.0--1.1.2.sql .//duckdb_fdw--1.1.2--1.1.3.sql .//duckdb_fdw--1.1.3--1.3.2.sql .//duckdb_fdw--1.3.2--1.4.1.sql  '/var/lib/pgsql/work/final/usr/pgsql-14/share/extension/'
/usr/bin/mkdir -p '/var/lib/pgsql/work/final/usr/pgsql-14/lib/bitcode/duckdb_fdw'
/usr/bin/mkdir -p '/var/lib/pgsql/work/final/usr/pgsql-14/lib/bitcode'/duckdb_fdw/
/usr/bin/install -c -m 644 connection.bc '/var/lib/pgsql/work/final/usr/pgsql-14/lib/bitcode'/duckdb_fdw/./
/usr/bin/install -c -m 644 option.bc '/var/lib/pgsql/work/final/usr/pgsql-14/lib/bitcode'/duckdb_fdw/./
/usr/bin/install -c -m 644 deparse.bc '/var/lib/pgsql/work/final/usr/pgsql-14/lib/bitcode'/duckdb_fdw/./
/usr/bin/install -c -m 644 sqlite_query.bc '/var/lib/pgsql/work/final/usr/pgsql-14/lib/bitcode'/duckdb_fdw/./
/usr/bin/install -c -m 644 duckdb_fdw.bc '/var/lib/pgsql/work/final/usr/pgsql-14/lib/bitcode'/duckdb_fdw/./
/usr/bin/install -c -m 644 sqlite3_api_wrapper.bc '/var/lib/pgsql/work/final/usr/pgsql-14/lib/bitcode'/duckdb_fdw/./
cd '/var/lib/pgsql/work/final/usr/pgsql-14/lib/bitcode' && /usr/bin/llvm-lto -thinlto -thinlto-action=thinlink -o duckdb_fdw.index.bc duckdb_fdw/connection.bc duckdb_fdw/option.bc duckdb_fdw/deparse.bc duckdb_fdw/sqlite_query.bc duckdb_fdw/duckdb_fdw.bc duckdb_fdw/sqlite3_api_wrapper.bc

cd /var/lib/pgsql/work/final
tar czf duckdb_fdw_pg14_package.tar.gz usr

# In future, transfer duckdb_fdw_pg14_package.tar.gz to other server, 
cd /
sudo tar xzf /tmp/duckdb_fdw_pg14_package.tar.gz

tar -tzvf duckdb_fdw_pg14_1.4.1.tar.gz

cd /
tar xvf /var/tmp/duckdb_fdw_pg14_1.4.1.tar.gz


The list of tarball file

tar -tzvf /var/tmp/duckdb_fdw_pg14_1.4.1.tar.gz
drwxr-xr-x postgres/postgres 0 2025-11-09 09:32 usr/
drwxr-xr-x postgres/postgres 0 2025-11-09 09:32 usr/pgsql-14/
drwxr-xr-x postgres/postgres 0 2025-11-09 09:32 usr/pgsql-14/lib/
-rwxr-xr-x postgres/postgres 861328 2025-11-09 09:32 usr/pgsql-14/lib/duckdb_fdw.so
-rwxr-xr-x postgres/postgres 64782936 2025-11-09 09:32 usr/pgsql-14/lib/libduckdb.so
drwxr-xr-x postgres/postgres        0 2025-11-09 09:32 usr/pgsql-14/lib/bitcode/
drwxr-xr-x postgres/postgres        0 2025-11-09 09:32 usr/pgsql-14/lib/bitcode/duckdb_fdw/
-rw-r--r-- postgres/postgres    20312 2025-11-09 09:32 usr/pgsql-14/lib/bitcode/duckdb_fdw/connection.bc
-rw-r--r-- postgres/postgres     9792 2025-11-09 09:32 usr/pgsql-14/lib/bitcode/duckdb_fdw/option.bc
-rw-r--r-- postgres/postgres    48300 2025-11-09 09:32 usr/pgsql-14/lib/bitcode/duckdb_fdw/deparse.bc
-rw-r--r-- postgres/postgres     8624 2025-11-09 09:32 usr/pgsql-14/lib/bitcode/duckdb_fdw/sqlite_query.bc
-rw-r--r-- postgres/postgres    65520 2025-11-09 09:32 usr/pgsql-14/lib/bitcode/duckdb_fdw/duckdb_fdw.bc
-rw-r--r-- postgres/postgres   128728 2025-11-09 09:32 usr/pgsql-14/lib/bitcode/duckdb_fdw/sqlite3_api_wrapper.bc
-rw-r--r-- postgres/postgres    26188 2025-11-09 09:32 usr/pgsql-14/lib/bitcode/duckdb_fdw.index.bc
drwxr-xr-x postgres/postgres        0 2025-11-09 09:32 usr/pgsql-14/share/
drwxr-xr-x postgres/postgres        0 2025-11-09 09:32 usr/pgsql-14/share/extension/
-rw-r--r-- postgres/postgres      136 2025-11-09 09:32 usr/pgsql-14/share/extension/duckdb_fdw.control
-rw-r--r-- postgres/postgres     1329 2025-11-09 09:32 usr/pgsql-14/share/extension/duckdb_fdw--1.0.0.sql
-rw-r--r-- postgres/postgres      155 2025-11-09 09:32 usr/pgsql-14/share/extension/duckdb_fdw--1.0.0--1.1.2.sql
-rw-r--r-- postgres/postgres      300 2025-11-09 09:32 usr/pgsql-14/share/extension/duckdb_fdw--1.1.2--1.1.3.sql
-rw-r--r-- postgres/postgres      359 2025-11-09 09:32 usr/pgsql-14/share/extension/duckdb_fdw--1.1.3--1.3.2.sql
-rw-r--r-- postgres/postgres      359 2025-11-09 09:32 usr/pgsql-14/share/extension/duckdb_fdw--1.3.2--1.4.1.sql


